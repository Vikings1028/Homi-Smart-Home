(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{161:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(40),r=a.n(n),s=(a(135),a(85)),i=a(14),l=a(8),o=a(237),d=a(243),u=a(235),j=a(3),b=a(6),m=a(1),h=Object(b.a)("div")((function(e){var t=e.theme;return Object(j.a)({display:"flex",flex:"1 1 auto",maxWidth:"100%",paddingTop:64},t.breakpoints.up("lg"),{paddingLeft:280})})),p=function(e){var t=e.children;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(h,{children:Object(m.jsx)(o.a,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"},children:t})})})},O=a(33),v=a.n(O),x=a(50),f=a(47),g=a.n(f),S=a(234),D=a(223),y=a(226),I=a(229),N=a(228),k="http://localhost:3000",C=1e3,w=(a(34),a(53),function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(""),s=Object(l.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)("success"),u=Object(l.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)("Connect"),p=Object(l.a)(h,2),O=p[0],f=p[1],w=function(){var e=Object(x.a)(v.a.mark((function e(){var t,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post(k+"/serial/scan",{cmd:"scan"});case 2:201===(t=e.sent).status&&(n(t.data.list),(a=localStorage.getItem("Device"))&&(c=JSON.parse(a),t.data.list.includes(c.port)&&(f("Disconnect"),b("error"),o(c.port))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(x.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post(k+"/serial/read",{cmd:"read"});case 2:201===(t=e.sent).status?(a={temp:t.data.data.temp,humidity:t.data.data.humidity,light:t.data.data.light,door:t.data.data.door,simclock:t.data.data.simclock},localStorage.setItem("DeviceReadings",JSON.stringify(a))):alert("Unable to read data");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w();var e=setInterval((function(){localStorage.getItem("Device")&&M()}),C);return function(){return clearInterval(e)}}),[]);var T=function(){var e=Object(x.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Connect"!==O){e.next=10;break}if(""!==i){e.next=4;break}return alert("Please select a port"),e.abrupt("return");case 4:return e.next=6,g.a.post(k+"/serial/open",{cmd:"open",path:i});case 6:200===(t=e.sent).status?(f("Disconnect"),b("error"),localStorage.setItem("Device",JSON.stringify({port:i}))):201===t.status?alert("Unable to connect! Resource busy"):alert("Unable to connect! There was an unknown error"),e.next=14;break;case 10:return e.next=12,g.a.post(k+"/serial/close",{cmd:"close"});case 12:201===e.sent.status?(f("Connect"),b("success"),localStorage.removeItem("DeviceReadings"),localStorage.removeItem("Device")):alert("Unable to disconnect");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{id:"deviceConnect",children:[Object(m.jsxs)(N.a,{sx:{m:1,minWidth:250},children:[Object(m.jsx)(I.a,{id:"demo-simple-select-helper-label",children:"Select your port"}),Object(m.jsx)(D.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:i,label:"Select your port",onChange:function(e){var t=e.target;return o(t.value)},children:null===a||void 0===a?void 0:a.map((function(e){return Object(m.jsx)(y.a,{value:e,children:e},e)}))})]}),Object(m.jsx)(S.a,{sx:{m:2},color:j,variant:"contained",size:"small",onClick:T,children:O})]})}),M=a(18),T=a(227),E=a(107),J=a(230),F=a(222),P=a(219),R=a(221),L=a.p+"static/media/light-off.0bfc97f5.png",W=a.p+"static/media/light-25.019573ec.png",B=a.p+"static/media/light-50.a72ac995.png",H=a.p+"static/media/light-75.cdbb79cc.png",A=a.p+"static/media/light-100.27180d32.png",U=function(){var e=Object(c.useState)("#aabbcc"),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(0),s=Object(l.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(0),u=Object(l.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(null),p=Object(l.a)(h,2),O=p[0],f=p[1],S=Object(c.useState)(null),D=Object(l.a)(S,2),y=D[0],I=D[1],N=function(){var e=Object(x.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={smartlight:{brightness:i}},e.next=3,g.a.post(k+"/serial/write",t);case 3:if(201!==e.sent.status){e.next=8;break}return e.abrupt("return");case 8:console.log("Error while writing data");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=setInterval((function(){var e=localStorage.getItem("DeviceReadings");if(e){var t=JSON.parse(e);b(t.light)}}),C);return function(){return clearInterval(e)}}),[]),Object(m.jsx)("div",{className:"dashCompDiv",children:Object(m.jsxs)("div",{id:"lightDiv",children:[Object(m.jsx)("h5",{children:" Smart Light "}),Object(m.jsxs)("p",{children:[" Light Sensor: ",j," "]}),Object(m.jsx)("img",{id:"lightbulb",src:L,alt:"lightbulb"}),Object(m.jsx)(T.a,{"aria-label":"Custom marks",defaultValue:0,step:1,valueLabelDisplay:"auto",marks:[{value:0,label:"0%"},{value:50,label:"50%"},{value:100,label:"100%"}],onChange:function(e){var t,a=e.target;return t=a.value,o(t),document.getElementById("lightbulb").src=0===i?L:i<25?W:i<50?B:i<75?H:A,void N()}}),Object(m.jsx)(E.a,{id:"colorSel",color:a,onChange:n}),Object(m.jsxs)("div",{id:"lightScheduleDiv",children:[Object(m.jsx)("div",{className:"timeSel",children:Object(m.jsx)(P.b,{dateAdapter:F.a,children:Object(m.jsx)(R.a,{className:"lightTimePicker",label:"Bedtime",value:O,onChange:function(e){f(e)},renderInput:function(e){return Object(m.jsx)(J.a,Object(M.a)({},e))}})})}),Object(m.jsx)("div",{className:"timeSel",children:Object(m.jsx)(P.b,{dateAdapter:F.a,children:Object(m.jsx)(R.a,{className:"lightTimePicker",label:"Wake-up",value:y,onChange:function(e){I(e)},renderInput:function(e){return Object(m.jsx)(J.a,Object(M.a)({},e))}})})})]})]})})},z={systemMode:"off",fanMode:"auto",temp:76,curTemp:"--",humidity:"--",status:"off"},G=function(){var e=Object(c.useState)(z),t=Object(l.a)(e,2),a=t[0],n=t[1],r=function(e,t){n((function(a){return Object(M.a)(Object(M.a)({},a),{},Object(j.a)({},e,t))}))};return Object(c.useEffect)((function(){var e=setInterval((function(){var e=localStorage.getItem("DeviceReadings");if(e){var t=JSON.parse(e);"temp"in t&&"humidity"in t&&(r("curTemp",t.temp),r("humidity",t.humidity),t.temp<a.temp&&"heat"==a.systemMode||t.temp>a.temp&&"cool"==a.systemMode?r("status","on"):r("status","off"))}}),C);return function(){return clearInterval(e)}}),[]),Object(m.jsx)("div",{className:"dashCompDiv",children:Object(m.jsxs)("div",{id:"tempDiv",children:[Object(m.jsx)("h5",{children:" Thermostat "}),Object(m.jsxs)("div",{id:"currentTempData",children:[Object(m.jsxs)("p",{id:"curTemp",children:[a.curTemp,"\xb0F"]}),Object(m.jsxs)("p",{id:"curHum",children:["Humidity: ",a.humidity,"%"]}),Object(m.jsxs)("p",{id:"curHum",children:["Status: ",a.status]})]}),Object(m.jsxs)(N.a,{sx:{m:1,minWidth:150},children:[Object(m.jsx)(I.a,{id:"demo-simple-select-helper-label",children:"System Mode"}),Object(m.jsxs)(D.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:a.systemMode,label:"System Mode",onChange:function(e){var t=e.target;return r("systemMode",t.value)},children:[Object(m.jsx)(y.a,{value:"off",children:"Off"}),Object(m.jsx)(y.a,{value:"cool",children:"Cool"}),Object(m.jsx)(y.a,{value:"heat",children:"Heat"})]})]}),Object(m.jsxs)(N.a,{sx:{m:1,minWidth:120},children:[Object(m.jsx)(I.a,{id:"demo-simple-select-helper-label",children:"Fan Mode"}),Object(m.jsxs)(D.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:a.fanMode,label:"Fan Mode",onChange:function(e){var t=e.target;return r("fanMode",t.value)},children:[Object(m.jsx)(y.a,{value:"on",children:"On"}),Object(m.jsx)(y.a,{value:"auto",children:"Auto"})]})]}),Object(m.jsx)("div",{children:Object(m.jsx)(J.a,{id:"tempEntry",label:"Temperature",value:a.temp,InputProps:{inputProps:{min:68,max:86,onKeyDown:function(e){e.preventDefault()}}},type:"number",onChange:function(e){var t=e.target;return r("temp",t.value)},margin:"normal"})})]})})},K=a(242),V=a(231),q=a.p+"static/media/door-open.45adcec7.png",Q=a.p+"static/media/door-close.16f02461.png",X=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(0),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){var e=setInterval((function(){var e=localStorage.getItem("DeviceReadings");if(e){var t=JSON.parse(e);o(t.door)}var a=localStorage.getItem("Door");a&&("0"===a?localStorage.setItem("Door","1"):"1"===a?localStorage.setItem("Door","2"):"2"===a&&(alert("The door is still open"),localStorage.setItem("Door","0")))}),C);return function(){return clearInterval(e)}}),[]),Object(m.jsx)("div",{className:"dashCompDiv",children:Object(m.jsxs)("div",{id:"doorDiv",children:[Object(m.jsx)("h5",{children:" Door "}),Object(m.jsxs)("p",{children:[" Door Sensor: ",i," "]}),Object(m.jsx)("img",{id:"door",src:Q,alt:"door"}),Object(m.jsx)(K.a,{id:"doorLabel",control:Object(m.jsx)(V.a,{}),label:"",value:a,onChange:function(){return function(){var e=document.getElementById("door");a?(localStorage.removeItem("Door"),e.src=Q):(localStorage.setItem("Door","0"),e.src=q),n(!a)}()}})]})})},Y=function(e){if("00:00"===e.date)return Object(m.jsx)("p",{id:"timeDisp",children:"00:00"});var t=e.date.getHours(),a=e.date.getMinutes(),c=t>=12?"PM":"AM",n=(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+c;return Object(m.jsx)("p",{id:"timeDisp",children:n})},Z=function(){var e=Object(c.useState)("00:00"),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){var e=setInterval((function(){var e=localStorage.getItem("DeviceReadings");if(e){var t=JSON.parse(e),a=new Date(t.simclock);n(a)}}),C);return function(){return clearInterval(e)}}),[]),Object(m.jsxs)("div",{id:"dashContainer",children:[Object(m.jsx)(Y,{date:a}),Object(m.jsx)(w,{}),Object(m.jsx)(o.a,{component:"main",id:"dashboardBox",sx:{flexGrow:1,py:8},children:Object(m.jsx)(d.a,{maxWidth:!1,children:Object(m.jsxs)(u.a,{container:!0,spacing:3,children:[Object(m.jsx)(u.a,{item:!0,xl:4,lg:4,sm:6,xs:12,children:Object(m.jsx)(X,{})}),Object(m.jsx)(u.a,{item:!0,xl:4,lg:4,sm:6,xs:12,children:Object(m.jsx)(G,{sx:{height:"100%"}})}),Object(m.jsx)(u.a,{item:!0,xl:4,lg:4,sm:6,xs:12,children:Object(m.jsx)(U,{})})]})})})]})};Z.getLayout=function(e){return Object(m.jsx)(p,{children:e})};var $=Z,_=a(110),ee=function(){return Object(m.jsx)("div",{className:"footerDiv",children:Object(m.jsx)(_.a.Footer,{children:Object(m.jsx)("small",{className:"text-muted",children:"Copyright \xa9 2021"})})})},te=a.p+"static/media/PageNotFound.a6ff114e.png",ae=function(){return Object(m.jsx)("div",{className:"pageNotFoundDiv",children:Object(m.jsx)("img",{className:"pageNotFoundImg",src:te,alt:"Page not found"})})},ce=function(){return Object(m.jsx)("div",{className:"mainDiv",children:Object(m.jsxs)(s.a,{children:[Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{path:"/",element:Object(m.jsx)($,{})}),Object(m.jsx)(i.a,{path:"dashboard",element:Object(m.jsx)($,{})}),Object(m.jsx)(i.a,{path:"*",element:Object(m.jsx)(ae,{})})]}),Object(m.jsx)(ee,{})]})})},ne=document.getElementById("root");r.a.render(Object(m.jsx)(ce,{}),ne)},34:function(e,t,a){},53:function(e,t,a){}},[[161,1,2]]]);
//# sourceMappingURL=main.f5c088ff.chunk.js.map